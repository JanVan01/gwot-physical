{% extends "base/frontend.html" %}

{% block resources%}
<link href="//cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.js"></script>
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
{% endblock resources%}

{% block navigation %}
<li class="active"><a href="/">Home</a></li>
<li><a href="/data">Data</a></li>
<li><a href="/config">Config</a></li>
<li><a href="/about">About</a></li>
{% endblock navigation %}

{% block content %}
<div class="container-fluid">
  <h2>Data overview for sensor {{ data.sensor }}</h2>
  <div id="table-div">
    <table class="table table-hover">
      <thead>
        <tr>
          <th></th>
          <th>Hourly</th>
          <th>Daily</th>
          <th>Monthly</th>
          <th>Yearly</th>
          <th>Accumulated</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Min</td>
          <td>{{ data.minHourly }}</td>
          <td>{{ data.minDaily }}</td>
          <td>{{ data.minMonthly }}</td>
          <td>{{ data.minYearly }}</td>
          <td>{{ data.minAccum }}</td>
        </tr>
        <tr>
          <td>Max</td>
          <td>{{ data.maxHourly }}</td>
          <td>{{ data.maxDaily }}</td>
          <td>{{ data.maxMonthly }}</td>
          <td>{{ data.maxYearly }}</td>
          <td>{{ data.maxAccum }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="row" id="lastValue">
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
    <p id="lastValue-content">Last Measurement: {{ data.last }}</p>
    </div>
    <div id="mapid" class="col-xs-12 col-sm-12 col-md-6 col-lg-6" style="width: 50%; height: 350px;">
    </div>
  </div>
</div>


<script>
  var mymap = L.map('mapid').setView([51.97339, 7.70035], 18);
  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
    '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    id: 'mapbox.streets'
  }).addTo(mymap);
  L.marker([51.97332, 7.70022]).addTo(mymap)
  .bindPopup("Physical Smart Thing!");
  mymap.on('click', onMapClick);
</script>

{% endblock content %}
